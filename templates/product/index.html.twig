{% extends 'base.html.twig' %}

{% block title %}Produits{% endblock %}

{% block body %}
<div class="page-container">
    <h1 style="text-align:center; margin-bottom:40px;">Nos produits</h1>
    <hr class="separator">

    <div class="products-page">

        <!-- Grille des produits -->
        <div class="products-grid">

            {# Filtre comme premier élément de la grille #}
            <div class="filter-box">
                <h2>Fourchette des prix :</h2>
                <a href="{{ path('app_products', {'min': 10, 'max': 29}) }}">10 à 29 €</a>
                <a href="{{ path('app_products', {'min': 30, 'max': 35}) }}">30 à 35 €</a>
                <a href="{{ path('app_products', {'min': 35, 'max': 50}) }}">35 à 50 €</a>
            </div>

            {% for product in products %}
                <div class="product-card">
                    <img src="{{ asset(product.image) }}" alt="{{ product.name }}"
                        onerror="this.onerror=null;this.src='{{ asset('images/products/default.jpeg') }}';">
                    <h3>Nom: {{ product.name }}</h3>
                    <p> Prix :{{ product.price }} €</p>
                    <a href="{{ path('product_show', {'id': product.id}) }}" class="btn-view">Voir</a>
                </div>
            {% else %}
                <p>Aucun produit disponible pour le moment.</p>
            {% endfor %}

        </div>
    </div>

    <p style="text-align:center; margin-top:30px;"><a href="{{ path('home') }}">Retour à l'accueil</a></p>
</div>

<style>
/* Conteneur principal centré */
.page-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* Grille principale */
.products-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3 colonnes max */
    gap: 20px;
}

/* Filtre prend la 1ère cellule de la première ligne */
.filter-box {
    grid-column: 1; /* colonne fixe */
    width: 150px;              /* largeur réduite */
    max-height: 250px;          /* hauteur maximale */
    border: 2px solid #ccc;
    border-radius: 10px;
    padding: 10px;             /* moins de padding pour réduire la hauteur */
    background-color: #f9f9f9;
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: 5px;                  /* réduire l'espace entre les liens */
}

.filter-box h2 {
    font-size: 1em;             /* titre plus petit */
    margin-bottom: 10px;
}

.filter-box a {
    display: block;
    padding: 6px;               /* liens plus petits pour réduire la hauteur */
    text-decoration: none;
    color: #fff;
    background-color: #007BFF;
    border-radius: 5px;
    font-weight: bold;
    font-size: 0.9em;           /* texte des liens plus petit */
}

.filter-box a:hover {
    background-color: #0056b3;
}

/* Carte produit */
.product-card {
    border: 2px solid #ccc;
    border-radius: 10px;
    background-color: #fff;
    padding: 15px;
    display: flex;
    flex-direction: column;
    min-height: 320px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.product-card img {
    width: 100%;
    height: auto;
    border-radius: 5px;
    margin-bottom: 10px;
}

.product-card h3 {
    margin: 10px 0 5px;
    text-align: center;
}

.product-card p {
    text-align: center;
    font-weight: bold;
    margin-bottom: 10px;
}

.product-card .btn-view {
    margin-left: auto;
    padding: 8px 12px;
    background-color: #007BFF;
    color: #fff;
    text-decoration: none;
    font-weight: bold;
    border-radius: 5px;
}

.product-card .btn-view:hover {
    background-color: #0056b3;
}

/* Responsive */
@media (max-width: 1024px) {
    .products-grid {
        grid-template-columns: repeat(2, 1fr); /* 2 colonnes */
    }
}

@media (max-width: 768px) {
    .products-grid {
        grid-template-columns: 1fr; /* 1 colonne */
    }
}
</style>
{% endblock %}